{
  "associatedLayout": "Main Scene",
  "lastChangeTimeStamp": 0,
  "name": "LevelEvents",
  "events": [
    {
      "type": "BuiltinCommonInstructions::Comment",
      "color": {
        "b": 109,
        "g": 230,
        "r": 255,
        "textB": 0,
        "textG": 0,
        "textR": 0
      },
      "comment": "This section contains all logic that applies to all levels (how to handle snapping, movement, etc)"
    },
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [],
      "actions": [
        {
          "type": {
            "value": "EffectCapability::EffectBehavior::EnableEffect"
          },
          "parameters": [
            "WireLR",
            "Effect",
            "\"Effect\"",
            "no"
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [
        {
          "type": {
            "value": "CompareTimer"
          },
          "parameters": [
            "",
            "\"actionTimeout\"",
            ">=",
            ".15"
          ]
        }
      ],
      "actions": [
        {
          "type": {
            "value": "ResetTimer"
          },
          "parameters": [
            "",
            "\"actionTimeout\""
          ]
        },
        {
          "type": {
            "value": "SetSceneVariableAsBoolean"
          },
          "parameters": [
            "canDoAction",
            "True"
          ]
        }
      ]
    },
    {
      "colorB": 228,
      "colorG": 176,
      "colorR": 74,
      "creationTime": 0,
      "name": "Debug",
      "source": "",
      "type": "BuiltinCommonInstructions::Group",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "GlobalVariableAsBoolean"
              },
              "parameters": [
                "debug",
                "True"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "ObjectVariableAsBoolean"
                  },
                  "parameters": [
                    "WireLR",
                    "connected",
                    "True"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "OpacityCapability::OpacityBehavior::SetValue"
                  },
                  "parameters": [
                    "WireLR",
                    "Opacity",
                    "=",
                    "127"
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "ObjectVariableAsBoolean"
                  },
                  "parameters": [
                    "WireLR",
                    "energized",
                    "True"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "EffectCapability::EffectBehavior::EnableEffect"
                  },
                  "parameters": [
                    "WireLR",
                    "Effect",
                    "\"Effect\"",
                    "yes"
                  ]
                }
              ]
            }
          ]
        }
      ],
      "parameters": []
    },
    {
      "colorB": 228,
      "colorG": 176,
      "colorR": 74,
      "creationTime": 0,
      "name": "Snapping",
      "source": "",
      "type": "BuiltinCommonInstructions::Group",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "CollisionNP"
              },
              "parameters": [
                "Fuse",
                "WireFuseHolder",
                "",
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetCenter"
              },
              "parameters": [
                "Fuse",
                "=",
                "WireFuseHolder.CenterX()",
                "=",
                "WireFuseHolder.CenterY()"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DraggableBehavior::Dropped"
              },
              "parameters": [
                "HoldableWireLR",
                "Draggable"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetCenter"
              },
              "parameters": [
                "HoldableWireLR",
                "=",
                "int((HoldableWireLR.X())/32)*32",
                "=",
                "int((HoldableWireLR.Y())/32)*32"
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Or"
                  },
                  "parameters": [],
                  "subInstructions": [
                    {
                      "type": {
                        "value": "CollisionNP"
                      },
                      "parameters": [
                        "HoldableWireLR",
                        "WireFuseHolder",
                        "",
                        "",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "MettreXY"
                  },
                  "parameters": [
                    "HoldableWireLR",
                    "=",
                    "HoldableWireLR.CenterX()+Random(128)",
                    "=",
                    "HoldableWireLR.CenterY()+ Random(128)"
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "DraggableBehavior::Dropped"
              },
              "parameters": [
                "HoldableWireTurn",
                "Draggable"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetCenter"
              },
              "parameters": [
                "HoldableWireTurn",
                "=",
                "int((HoldableWireTurn.X())/32)*32",
                "=",
                "int((HoldableWireTurn.Y())/32)*32"
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "BuiltinCommonInstructions::Or"
                  },
                  "parameters": [],
                  "subInstructions": [
                    {
                      "type": {
                        "value": "CollisionNP"
                      },
                      "parameters": [
                        "HoldableWireTurn",
                        "WireFuseHolder",
                        "",
                        "",
                        ""
                      ]
                    }
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "MettreXY"
                  },
                  "parameters": [
                    "HoldableWireTurn",
                    "=",
                    "HoldableWireTurn.CenterX()+Random(128)",
                    "=",
                    "HoldableWireTurn.CenterY()+ Random(128)"
                  ]
                }
              ]
            }
          ]
        }
      ],
      "parameters": []
    },
    {
      "colorB": 228,
      "colorG": 176,
      "colorR": 74,
      "creationTime": 0,
      "name": "Element Logic",
      "source": "",
      "type": "BuiltinCommonInstructions::Group",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "CollisionNP"
              },
              "parameters": [
                "WireFuseHolder",
                "Fuse",
                "",
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetObjectVariableAsBoolean"
              },
              "parameters": [
                "WireFuseHolder",
                "hasFuse",
                "True"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "CollisionNP"
              },
              "parameters": [
                "PathObjects",
                "Fuse",
                "",
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetObjectVariableAsBoolean"
              },
              "parameters": [
                "WireFuseHolder",
                "hasFuse",
                "False"
              ]
            }
          ]
        }
      ],
      "parameters": []
    },
    {
      "colorB": 228,
      "colorG": 176,
      "colorR": 74,
      "creationTime": 0,
      "name": "ElectricityCircleMovement",
      "source": "",
      "type": "BuiltinCommonInstructions::Group",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "KeyPressed"
              },
              "parameters": [
                "",
                "w"
              ]
            },
            {
              "type": {
                "value": "SceneVariableAsBoolean"
              },
              "parameters": [
                "canDoAction",
                "True"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "elecPrevXPos",
                "=",
                "electricitySprite.CenterX()"
              ]
            },
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "elecPrevYPos",
                "=",
                "electricitySprite.CenterY()"
              ]
            },
            {
              "type": {
                "value": "MettreY"
              },
              "parameters": [
                "electricitySprite",
                "=",
                "electricitySprite.CenterY() - 16"
              ]
            },
            {
              "type": {
                "value": "SetSceneVariableAsBoolean"
              },
              "parameters": [
                "canDoAction",
                "False"
              ]
            },
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"actionTimeout\""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "KeyPressed"
              },
              "parameters": [
                "",
                "a"
              ]
            },
            {
              "type": {
                "value": "SceneVariableAsBoolean"
              },
              "parameters": [
                "canDoAction",
                "True"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "elecPrevXPos",
                "=",
                "electricitySprite.CenterX()"
              ]
            },
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "elecPrevYPos",
                "=",
                "electricitySprite.CenterY()"
              ]
            },
            {
              "type": {
                "value": "SetSceneVariableAsBoolean"
              },
              "parameters": [
                "canDoAction",
                "False"
              ]
            },
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"actionTimeout\""
              ]
            },
            {
              "type": {
                "value": "MettreX"
              },
              "parameters": [
                "electricitySprite",
                "=",
                "electricitySprite.CenterX() - 16"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "KeyPressed"
              },
              "parameters": [
                "",
                "s"
              ]
            },
            {
              "type": {
                "value": "SceneVariableAsBoolean"
              },
              "parameters": [
                "canDoAction",
                "True"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "elecPrevYPos",
                "=",
                "electricitySprite.CenterY()"
              ]
            },
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "elecPrevXPos",
                "=",
                "electricitySprite.CenterX()"
              ]
            },
            {
              "type": {
                "value": "MettreY"
              },
              "parameters": [
                "electricitySprite",
                "=",
                "electricitySprite.CenterY() + 16"
              ]
            },
            {
              "type": {
                "value": "SetSceneVariableAsBoolean"
              },
              "parameters": [
                "canDoAction",
                "False"
              ]
            },
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"actionTimeout\""
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "KeyPressed"
              },
              "parameters": [
                "",
                "d"
              ]
            },
            {
              "type": {
                "value": "SceneVariableAsBoolean"
              },
              "parameters": [
                "canDoAction",
                "True"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "elecPrevXPos",
                "=",
                "electricitySprite.CenterX()"
              ]
            },
            {
              "type": {
                "value": "ModVarScene"
              },
              "parameters": [
                "elecPrevYPos",
                "=",
                "electricitySprite.CenterY()"
              ]
            },
            {
              "type": {
                "value": "SetSceneVariableAsBoolean"
              },
              "parameters": [
                "canDoAction",
                "False"
              ]
            },
            {
              "type": {
                "value": "ResetTimer"
              },
              "parameters": [
                "",
                "\"actionTimeout\""
              ]
            },
            {
              "type": {
                "value": "MettreX"
              },
              "parameters": [
                "electricitySprite",
                "=",
                "electricitySprite.CenterX() + 16"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "inverted": true,
                "value": "CollisionNP"
              },
              "parameters": [
                "electricitySprite",
                "PathObjects",
                "",
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetCenter"
              },
              "parameters": [
                "electricitySprite",
                "=",
                "Variable(elecPrevXPos)",
                "=",
                "Variable(elecPrevYPos)"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "CollisionNP"
              },
              "parameters": [
                "electricitySprite",
                "WireFuseHolder",
                "",
                "",
                ""
              ]
            },
            {
              "type": {
                "value": "ObjectVariableAsBoolean"
              },
              "parameters": [
                "WireFuseHolder",
                "hasFuse",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetCenter"
              },
              "parameters": [
                "electricitySprite",
                "=",
                "Variable(elecPrevXPos)",
                "=",
                "Variable(elecPrevYPos)"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "CollisionNP"
              },
              "parameters": [
                "electricitySprite",
                "PowerEndpoint",
                "",
                "",
                ""
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ShowLayer"
              },
              "parameters": [
                "",
                "\"win text\""
              ]
            }
          ]
        }
      ],
      "parameters": []
    }
  ]
}